<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>АУК</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <meta name="description" content="Автоматизированный учебный курс">
  <meta name="author" content="khisamov.studio">
  <link th:href="@{/css/normalize.css}" rel="stylesheet">
  <link th:href="@{/css/main.css}" rel="stylesheet">
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <!--[if !IE 7]>
  <style type="text/css">
    #wrap {display:table;height:100%}
  </style>
  <![endif]-->
</head>
<body>
<div class="wrapper">
  <header class="header">
    <div class="header__body responsive-wrapper">
      <div class="header__name"><a href="/">Автоматизированный учебный курс</a></div>
      <nav class="header__nav">
        <a href="/profile">Личный кабинет</a>
      </nav>
    </div>
  </header>
  <main class="main">
    <div class="main__body responsive-wrapper">
      <div class="widget widget__center">
        <h2>Изменение теста</h2>

        <form role="form" th:action="@{/profile/edit/test}" th:method="POST" th:object="${test}">
          <label>Название теста</label>
          <input type="text" id="answer" name="text" th:field="*{name}" class="widget__input" th:value="${oldTest.getName()}">
          <br>
          <label>Вопросы</label>
          <ul>
            <li th:each="question, itemStat : *{questions}">
              <input type="text" th:field="*{questions[__${itemStat.index}__].text}" class="widget__input">
              <br>
              <label>Выберите категорию</label>
              <ul>
                <li th:each="category : ${categories}">
                  <input type="radio" th:field="*{questions[__${itemStat.index}__].category}" th:value="${category.getId()}" th:checked="${oldTest.getQuestions().get(__${itemStat.index}__).getCategory()} == ${category} ? 'checked' : 'unchecked'"/>
                  <label th:utext="${category.getName()}"></label>
                </li>
              </ul>
              <label>Изменить ответы</label>
              <ul>
                <li th:each="answer, itemStat : *{questions[__${itemStat.index}__].getAnswers()}">
                  <input type="text" th:field="*{questions[__${itemStat.index}__].getAnswers()[]}" class="widget__input">
              <label>Выберите правильный ответ</label>
              <ul>
                <li th:each="answer : *{questions[__${itemStat.index}__].getAnswers()}">
                  <input type="radio" th:field="*{questions[__${itemStat.index}__].rightAnswer}" th:value="${answer.getId()}" th:checked="${oldTest.getQuestions().get(__${itemStat.index}__).getRightAnswer()} == ${answer} ? 'checked' : 'unchecked'"/>
                  <label th:utext="${answer.getText()}"></label>
                </li>
              </ul>
            </li>
          </ul>
          <button class="main__button widget__button" type="submit" name="submit">Изменить тест</button>
        </form>
      </div>
    </div>
  </main>
</div>
</body>
</html>